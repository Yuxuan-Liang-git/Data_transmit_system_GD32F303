# Data_transmit_system_GD32F303

基于风机叶片的数据采集系统

- [x] 硬件设置IP地址

  基本完成，目前还不需要单独设置IP地址

  2023年3月20日

  已实现该功能

- [x] 网络通信

  2023年3月25日

  UDP通信成功。上位机可以用UDP协议正常发送数据给板子，但目前还未实际测试过上位机是否能正常接受下位机回传数据。

- [x] DMA存储信息

- [x] ADC采样

  2023年3月20日

  修改系统时钟，实现精确定时

  2023年4月20日

  改用了定时器中断的方式触发ADC采样，现在采样频率可以自己定了！

- [x] 数据打包发回

  2023年3月25日

  UDP通讯成功！但是只能电脑发数据给板子，板子发回来的数据电脑收不到...

  2023年4月1日

  改换TCP通讯，已实现主从机信息交流；增加地址修改选项，可用硬件修改从机IP地址

  2023年4月26日

  实现数据打包功能，之前由于TCP握手过于频繁导致网络堵塞。现在定义了4KB的缓存，将采集到的数据存到缓存中，以3.2ms的时间间隔发数据。

- [x] 上位机数据解包

  2023年4月27日

  实现单通道解包，晚些时候来写多通道的解包。

  2023年5月1日
  
  解包完成，会出现丢包的问题。
  
  2023年5月3日
  
  打包发送时会影响ADC的实时性。
  
  2023年5月5日
  
  中断无法解决实时性问题。尝试使用FreeRTOS。
  



`code` ：不进行打包直接发送数据

`code_`：打包发送数据

`gd32f30x-master`：基于FreeRTOS的数据采集系统